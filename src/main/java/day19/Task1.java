package day19;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.PrintWriter;
import java.util.*;
import java.util.stream.Collectors;
public class Task1 {
    public static void main(String[] args) throws FileNotFoundException {
        PrintWriter pw = new PrintWriter("E:\\java lessons\\JavaMarathon2021\\src\\main\\resources\\dushi1.txt");
        pw.println("О себе приезжий, как казалось, избегал много говорить; если же говорил, то какими-то общими местами, с заметною скромностию, и разговор его в таких случаях принимал несколько книжные обороты: что он не значащий червь мира сего и не достоин того, чтобы много о нем заботились, что испытал много на веку своем, претерпел на службе за правду, имел много неприятелей, покушавшихся даже на жизнь его, и что теперь, желая успокоиться, ищет избрать наконец место для жительства, и что, прибывши в этот город, почел за непременный долг засвидетельствовать свое почтение первым его сановникам. Вот все, что узнали в городе об этом новом лице, которое очень скоро не преминуло показать себя на губернаторской вечеринке. Приготовление к этой вечеринке заняло с лишком два часа времени, и здесь в приезжем оказалась такая внимательность к туалету, какой даже не везде видывано. После небольшого послеобеденного сна он приказал подать умыться и чрезвычайно долго тер мылом обе щеки, подперши их извнутри языком; потом, взявши с плеча трактирного слуги полотенце, вытер им со всех сторон полное свое лицо, начав из-за ушей и фыркнув прежде раза два в самое лицо трактирного слуги. Потом надел перед зеркалом манишку, выщипнул вылезшие из носу два волоска и непосредственно за тем очутился во фраке брусничного цвета с искрой. Таким образом одевшись, покатился он в собственном экипаже по бесконечно широким улицам, озаренным тощим освещением из кое-где мелькавших окон. Впрочем, губернаторский дом был так освещен, хоть бы и для бала; коляска с фонарями, перед подъездом два жандарма, форейторские крики вдали – словом, всё как нужно. Вошедши в зал, Чичиков должен был на минуту зажмурить глаза, потому что блеск от свечей, ламп и дамских платьев был страшный. Все было залито светом. Черные фраки мелькали и носились врознь и кучами там и там, как носятся мухи на белом сияющем рафинаде в пору жаркого июльского лета, когда старая ключница рубит и делит его на сверкающие обломки перед открытым окном; дети все глядят, собравшись вокруг, следя любопытно за движениями жестких рук ее, подымающих молот, а воздушные эскадроны мух, поднятые легким воздухом, влетают смело, как полные хозяева, и, пользуясь подслеповатостию старухи и солнцем, беспокоящим глаза ее, обсыпают лакомые куски где вразбитную, где густыми кучами. Насыщенные богатым летом, и без того на всяком шагу расставляющим лакомые блюда, они влетели вовсе не с тем, чтобы есть, но чтобы только показать себя, пройтись взад и вперед по сахарной куче, потереть одна о другую задние или передние ножки, или почесать ими у себя под крылышками, или, протянувши обе передние лапки, потереть ими у себя над головою, повернуться и опять улететь, и опять прилететь с новыми докучными эскадронами. Не успел Чичиков осмотреться, как уже был схвачен под руку губернатором, который представил его тут же губернаторше. Приезжий гость и тут не уронил себя: он сказал какой-то комплимент, весьма приличный для человека средних лет, имеющего чин не слишком большой и не слишком малый. Когда установившиеся пары танцующих притиснули всех к стене, он, заложивши руки назад, глядел на них минуты две очень внимательно. Многие дамы были хорошо одеты и по моде, другие оделись во что Бог послал в губернский город. Мужчины здесь, как и везде, были двух родов: одни тоненькие, которые всё увивались около дам; некоторые из них были такого рода, что с трудом можно было отличить их от петербургских, имели так же весьма обдуманно и со вкусом зачесанные бакенбарды или просто благовидные, весьма гладко выбритые овалы лиц, так же небрежно подседали к дамам, так же говорили по-французски и смешили дам так же, как и в Петербурге. Другой род мужчин составляли толстые или такие же, как Чичиков, то есть не так чтобы слишком толстые, однако ж и не тонкие. Эти, напротив того, косились и пятились от дам и посматривали только по сторонам, не расставлял ли где губернаторский слуга зеленого стола для виста. Лица у них были полные и круглые, на иных даже были бородавки, кое-кто был и рябоват, волос они на голове не носили ни хохлами, ни буклями, ни на манер «черт меня побери», как говорят французы, – волосы у них были или низко подстрижены, или прилизаны, а черты лица больше закругленные и крепкие. Это были почетные чиновники в городе. Увы! толстые умеют лучше на этом свете обделывать дела свои, нежели тоненькие. Тоненькие служат больше по особенным поручениям или только числятся и виляют туда и сюда; их существование как-то слишком легко, воздушно и совсем ненадежно. Толстые же никогда не занимают косвенных мест, а всё прямые, и уж если сядут где, то сядут надежно и крепко, так что скорей место затрещит и угнется под ними, а уж они не слетят. Наружного блеска они не любят; на них фрак не так ловко скроен, как у тоненьких, зато в шкатулках благодать божия. У тоненького в три года не остается ни одной души, не заложенной в ломбард; у толстого спокойно, глядь – и явился где-нибудь в конце города дом, купленный на имя жены, потом в другом конце другой дом, потом близ города деревенька, потом и село со всеми угодьями. Наконец толстый, послуживши Богу и государю, заслуживши всеобщее уважение, оставляет службу, перебирается и делается помещиком, славным русским барином, хлебосолом, и живет, и хорошо живет. А после него опять тоненькие наследники спускают, по русскому обычаю, на курьерских все отцовское добро. Нельзя утаить, что почти такого рода размышления занимали Чичикова в то время, когда он рассматривал общество, и следствием этого было то, что он наконец присоединился к толстым, где встретил почти всё знакомые лица: прокурора с весьма черными густыми бровями и несколько подмигивавшим левым глазом так, как будто бы говорил: «Пойдем, брат, в другую комнату, там я тебе что-то скажу», – человека, впрочем, серьезного и молчаливого; почтмейстера, низенького человека, но остряка и философа; председателя палаты, весьма рассудительного и любезного человека, – которые все приветствовали его, как старинного знакомого, на что Чичиков раскланивался несколько набок, впрочем, не без приятности. Тут же познакомился он с весьма обходительным и учтивым помещиком Маниловым и несколько неуклюжим на взгляд Собакевичем, который с первого раза ему наступил на ногу, сказавши: «Прошу прощения». Тут же ему всунули карту на вист, которую он принял с таким же вежливым поклоном. Они сели за зеленый стол и не вставали уже до ужина. Все разговоры совершенно прекратились, как случается всегда, когда наконец предаются занятию дельному. Хотя почтмейстер был очень речист, но и тот, взявши в руки карты, тот же час выразил на лице своем мыслящую физиономию, покрыл нижнею губою верхнюю и сохранил такое положение во все время игры. Выходя с фигуры, он ударял по столу крепко рукою, приговаривая, если была дама: «Пошла, старая попадья!», если же король: «Пошел, тамбовский мужик!» А председатель приговаривал: «А я его по усам! А я ее по усам!» Иногда при ударе карт по столу вырывались выражения: «А! была не была, не с чего, так с бубен!» Или же просто восклицания: «черви! червоточина! пикенция!» или: «пикендрас! пичурущух пичура!» и даже просто: «пичук!» – названия, которыми перекрестили они масти в своем обществе. По окончании игры спорили, как водится, довольно громко. Приезжий наш гость также спорил, но как-то чрезвычайно искусно, так что все видели, что он спорил, а между тем приятно спорил. Никогда он не говорил: «вы пошли», но: «вы изволили пойти», «я имел честь покрыть вашу двойку» и тому подобное. Чтобы еще более согласить в чем-нибудь своих противников, он всякий раз подносил им всем свою серебряную с финифтью табакерку, на дне которой заметили две фиалки, положенные туда для запаха. Внимание приезжего особенно заняли помещики Манилов и Собакевич, о которых было упомянуто выше. Он тотчас же осведомился о них, отозвавши тут же несколько в сторонупредседателя и почтмейстера. Несколько вопросов, им сделанных, показали в госте не только любознательность, но и основательность; ибо прежде всего расспросил он, сколько у каждого из них душ крестьян и в каком положении находятся их имения, а потом уже осведомился, как имя и отчество. В немного времени он совершенно успел очаровать их. Помещик Манилов, еще вовсе человек не пожилой, имевший глаза сладкие, как сахар, и щуривший их всякий раз, когда смеялся, был от него без памяти. Он очень долго жал ему руку и просил убедительно сделать ему честь своим приездом в деревню, к которой, по его словам, было только пятнадцать верст от городской заставы. На что Чичиков с весьма вежливым наклонением головы и искренним пожатием руки отвечал, что он не только с большою охотою готов это исполнить, но даже почтет за священнейший долг. Собакевич тоже сказал несколько лаконически: «И ко мне прошу», – шаркнувши ногою, обутою в сапог такого исполинского размера, которому вряд ли где можно найти отвечающую ногу, особливо в нынешнее время, когда и на Руси начинают выводиться богатыри.\n");
        pw.close();
        File file = new File("E:\\java lessons\\JavaMarathon2021\\src\\main\\resources\\dushi1.txt"); //к сожалению не получилось у меня подобрать нужную кодировку для отображения в консоли текста Мертвых душ.
        Scanner scanner = new Scanner(file);                                                           //пришлось через PrintWriter записать фрагмент текста в файл dushi1.txt из среды разработки
        String text = scanner.nextLine();
        String[] dushi = text.split("[.,:;()?!\"\\s-]+");
        Map<String, Integer> map = new HashMap<>();
        for (String words : dushi) {
            if (!map.containsKey(words)) {
                map.put(words,0);
            }
            map.put(words, map.get(words) + 1);
        }
        Map<String, Integer> sortedMap = map.entrySet().stream()
                .sorted(Comparator.comparingInt(e -> -e.getValue()))
                .collect(Collectors.toMap(
                        Map.Entry::getKey,
                        Map.Entry::getValue,
                        (a,b) -> {throw new AssertionError();},
                        LinkedHashMap::new
                ));
        sortedMap.entrySet().forEach(System.out::println);
    }
}